pub const WORLD_SCALE: f64 = 3.0;
pub const NODE_ANGLE: f64 = std::f64::consts::PI / 60.0 / WORLD_SCALE;
pub const NODE_QUEUE_SIZE: usize = 9;
pub const STARTING_LENGTH: usize = 8;
pub const BASE_SPEED: f64 = (NODE_ANGLE * 2.0) / ((NODE_QUEUE_SIZE + 1) as f64);
pub const BOOST_MULTIPLIER: f64 = 2.1;
pub const OXYGEN_MAX: f64 = 1.0;
pub const OXYGEN_DRAIN_PER_SEC: f64 = 0.1;
pub const MIN_SURVIVAL_LENGTH: usize = 3;
pub const DIGESTION_TRAVEL_SPEED_MULT: f64 = 3.0;
pub const TURN_RATE: f64 = 0.3 / WORLD_SCALE;
pub const COLLISION_DISTANCE: f64 = 0.10467191248588766 / WORLD_SCALE;
#[cfg(not(test))]
pub const BASE_PELLET_COUNT: usize = 2400;
#[cfg(test)]
pub const BASE_PELLET_COUNT: usize = 3;
pub const MAX_PELLETS: usize = u16::MAX as usize;
pub const BIG_PELLET_GROWTH_FRACTION: f64 = 0.10;
pub const BOOST_SCORE_DRAIN_PER_SEC: f64 = 0.6;
pub const BOOST_NODE_DRAIN_PER_SEC: f64 = BOOST_SCORE_DRAIN_PER_SEC * BIG_PELLET_GROWTH_FRACTION;
pub const SMALL_PELLET_GROWTH_FRACTION: f64 = BIG_PELLET_GROWTH_FRACTION / 20.0;
pub const SMALL_PELLET_DIGESTION_STRENGTH: f32 = 0.34;
pub const SMALL_PELLET_DIGESTION_STRENGTH_MAX: f32 = 1.0;
pub const SMALL_PELLET_SIZE_MIN: f32 = 0.55;
pub const SMALL_PELLET_SIZE_MAX: f32 = 0.95;
pub const DEATH_PELLET_SIZE_MIN: f32 = 1.65;
pub const DEATH_PELLET_SIZE_MAX: f32 = 2.85;
pub const EVASIVE_PELLET_MIN_LEN: usize = STARTING_LENGTH;
pub const EVASIVE_PELLET_MAX_LEN: usize = 20;
pub const EVASIVE_PELLET_COOLDOWN_MS: i64 = 60_000;
pub const EVASIVE_PELLET_COOLDOWN_JITTER_MS: i64 = 10_000;
pub const EVASIVE_PELLET_RETRY_DELAY_MS: i64 = 5_000;
pub const EVASIVE_PELLET_LIFETIME_MS: i64 = 20_000;
pub const EVASIVE_PELLET_SIZE_MIN: f32 = DEATH_PELLET_SIZE_MIN;
pub const EVASIVE_PELLET_SIZE_MAX: f32 = DEATH_PELLET_SIZE_MAX;
pub const EVASIVE_PELLET_OWNER_NEAR_ANGLE_MIN: f64 = 0.115;
pub const EVASIVE_PELLET_OWNER_NEAR_ANGLE_MAX: f64 = 0.19;
pub const EVASIVE_PELLET_OTHER_HEAD_EXCLUSION_ANGLE: f64 = 0.22;
pub const EVASIVE_PELLET_EVADE_RADIUS: f64 = 0.34;
pub const EVASIVE_PELLET_CHASE_MAX_ANGLE_RATIO: f64 = 1.35;
pub const EVASIVE_PELLET_CHASE_CONE_ANGLE: f64 = std::f64::consts::PI * 0.38;
pub const EVASIVE_PELLET_EVADE_SPEED: f64 = 2.64;
pub const EVASIVE_PELLET_EVADE_STEP_MAX: f64 = 0.085;
pub const EVASIVE_PELLET_MAX_STEP_PER_TICK: f64 = BASE_SPEED * BOOST_MULTIPLIER * 0.506;
pub const EVASIVE_PELLET_SUCTION_RADIUS: f64 = 0.11;
pub const EVASIVE_PELLET_SUCTION_SPEED: f64 = 2.8;
pub const EVASIVE_PELLET_SUCTION_STEP_MAX: f64 = 0.012;
pub const EVASIVE_PELLET_EVADE_MIN_FACTOR: f64 = 0.18;
pub const EVASIVE_PELLET_EVADE_FULL_RADIUS_RATIO: f64 = 0.72;
pub const EVASIVE_PELLET_EVADE_FADE_RADIUS_RATIO: f64 = 1.2;
pub const EVASIVE_PELLET_ZIGZAG_HZ: f64 = 1.35;
pub const EVASIVE_PELLET_ZIGZAG_STRENGTH: f64 = 0.26;
pub const EVASIVE_PELLET_MAX_PER_PLAYER: usize = 1;
pub const EVASIVE_PELLET_SPAWN_ATTEMPTS: usize = 28;
pub const PELLET_SIZE_ENCODE_MIN: f32 = SMALL_PELLET_SIZE_MIN;
pub const PELLET_SIZE_ENCODE_MAX: f32 = DEATH_PELLET_SIZE_MAX;
pub const SMALL_PELLET_SHRINK_MIN_RATIO: f32 = 0.24;
pub const SMALL_PELLET_ATTRACT_RADIUS: f64 = 0.11;
pub const SMALL_PELLET_LOCK_CONE_ANGLE: f64 = std::f64::consts::PI * 0.36;
pub const SMALL_PELLET_CONSUME_ANGLE: f64 = 0.0038;
pub const SMALL_PELLET_ATTRACT_SPEED: f64 = 3.2;
pub const SMALL_PELLET_ATTRACT_STEP_MAX_RATIO: f64 = 0.35;
pub const SMALL_PELLET_MOUTH_FORWARD: f64 = 0.0;
pub const SMALL_PELLET_SPAWN_HEAD_EXCLUSION_ANGLE: f64 = 0.08;
pub const SMALL_PELLET_ZOOM_MIN_CAMERA_DISTANCE: f64 = 4.0;
pub const SMALL_PELLET_ZOOM_MAX_CAMERA_DISTANCE: f64 = 10.0;
pub const SMALL_PELLET_VISIBLE_MIN: usize = 520;
pub const SMALL_PELLET_VISIBLE_MAX: usize = 2200;
pub const SMALL_PELLET_VIEW_MARGIN_MIN: f64 = 0.06;
pub const SMALL_PELLET_VIEW_MARGIN_MAX: f64 = 0.2;
pub const TICK_MS: u64 = 50;
pub const RESPAWN_COOLDOWN_MS: i64 = 5000;
pub const RESPAWN_RETRY_MS: i64 = 500;
pub const PLAYER_TIMEOUT_MS: i64 = 15000;
pub const SPAWN_CONE_ANGLE: f64 = std::f64::consts::PI / 3.0;
pub const MAX_SPAWN_ATTEMPTS: usize = 32;
pub const SPAWN_PLAYER_MIN_DISTANCE: f64 = COLLISION_DISTANCE * 2.0;
pub const DIGESTION_TAIL_SETTLE_STEPS: i64 = 4;
// Tail growth is smoothed by draining "pending" tail growth at a dynamic rate:
// `rate = base + mult * sqrt(backlog)`, clamped to `max`.
// This keeps small growth smooth while letting large bursts catch up faster than linear.
pub const DIGESTION_TAIL_GROWTH_BASE_PER_STEP: f64 = 0.035;
pub const DIGESTION_TAIL_GROWTH_BACKLOG_SQRT_MULT: f64 = 0.08;
pub const DIGESTION_TAIL_GROWTH_MAX_PER_STEP: f64 = 0.28;
pub const BOT_COUNT: usize = 5;
pub const BOT_BOOST_DISTANCE: f64 = 0.6 / WORLD_SCALE;
pub const SNAKE_GIRTH_NODES_PER_STEP: usize = 10;
pub const SNAKE_GIRTH_STEP_PERCENT: f64 = 0.10;
pub const SNAKE_GIRTH_MAX_SCALE: f64 = 2.0;

pub const COLOR_POOL: [&str; 8] = [
    "#ff6b6b", "#ffd166", "#06d6a0", "#4dabf7", "#f06595", "#845ef7", "#20c997", "#fcc419",
];
